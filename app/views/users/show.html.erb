<div id="touchsurface3" class="main-container">
<div class="jumbotron user">

  <div class="row">

    <div class="user-img-container col-xs-6 col-md-4"> <p style="text-align: center;"><%= image_tag("Weef.png", size: "200x200", class: "user-img") %></p></div>

    <div class="user-name col-xs-12 col-md-8">
      <h6>Your user name for this session:</h6>
      <h1><%= @user.name %></h1>
      <hr>
    

      <div class="view">
      <p>Please set your desired <i>weef</i> radius (in miles):</p>      

        <div class="example">

          <div id="slider-range"></div>

          <span class="example-val" id="slider-range-value"></span>

              <hr>
              <%= form_tag "/users/#{current_user.id}", method: :patch do %>

              <%= text_field_tag(:location_radius) %>
        
              <%= submit_tag "Update", class: "btn btn-default" %>

              <% end %>
              <hr>
              <script>
                var rangeSlider = document.getElementById('slider-range');

                noUiSlider.create(rangeSlider, {
                  start: [ <%= @user.location_radius %> ],
                  range: {
                    'min': [  5 ],
                    'max': [ 2000 ]
                  }
                });
              </script>   
              <script>
                var rangeSliderValueElement = document.getElementById('location_radius');

                rangeSlider.noUiSlider.on('update', function( values, handle ) {
                  rangeSliderValueElement.value = values[handle];
                });
              </script>   

          </div>

        </div>

      </div>

    </div>


    <h3 style="text-align: center;"> Weaction Profile </h3>

    <div id="chart-container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
    
    <hr>

    <div id="area-container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>



    <hr>


          <div class="weef-menu">
            <div class="col-md-4">
              <%= link_to "my posts", "/users", class: "btn btn-green weef-btn" %>
            </div>

            <div class="col-md-4">
              <%= link_to "my weefs", "/weefs", class: "btn btn-blue weef-btn" %>
            </div>

            <div class="col-md-4">
              <a data-toggle="modal" data-target="#myModal" class="btn btn-red weef-btn"> User Settings </a>
            </div>
          </div>
          <br>
        
    </div>

  </div>

</div>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">User Settings</h4>
      </div>
      <div class="modal-body">
        <%= link_to "Delete Yourself!", "/users/#{current_user.id}", method: :delete, data:{confirm: "Are You Sure"}, :class => "btn btn-default", :role => "button" %> 
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>

  <script>
      
      $(function() {
          
        setTimeout(function(){
        
          $('.bar-limit').each(function() {
            var me = $(this);
            var perc = me.attr("data-limit");
            var current_perc = 0;
            
            if(!$(this).hasClass('stop')){
            
              var progress = setInterval(function() {
                              
                if (current_perc>=perc) {
                  clearInterval(progress);
                } else {
                  current_perc +=1;
                  me.parent().children('.bar-content').css('height', (current_perc)+'%');
                  me.html(current_perc+'%');
                }
            
              }, 15);
              
              me.addClass('stop');
              me.parent().children('.bar-content').addClass('stop');
              
            }
            
          });
          
        }, 0);
        
      });
    
      
    </script>


